<% var page = 'advisors' %>

<html>
  <head>
    <% include ../shared/_header %>
    <script src="/scripts/jquery-latest.js"></script> 
    <script src="/scripts/jquery.tablesorter.js"></script> 
    <link rel="stylesheet" href="/css/table.css">
  </head>
  <body>
  	<% include ../shared/_navbar %>

  	<div class="container-fluid">

      <% if (user && user['admin']){ %>
        <a href="/advisors/new">Add new advisor</a>
      <% } %>
      <br>
	  	<br>
      <div class="row">
        <div class="col-sm-4 col-sm-offset-0">
          <div class="input-group stylish-input-group">
            <input type="text" class="form-control" id="search" name="search" placeholder="Type to search" value="">
            </div>
        </div>
      </div>


      <br>
      <br>
      <table id="advisorTable" class="table table-striped table-bordered table-hover tablesorter">
        <thead>
        <tr>
          <th></th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>E-mail</th>
          <th>Joined On</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <% for(var i = 0; i < advisors.length; i++ ){ %>
          <% var advisor = advisors[i] %>
          <% include _advisor %>
        <% } %>
        </tbody>
      </table>
  	</div>
 	</body>

  <script>
  $(document).load(function() 
    { 
      $("#advisorTable").tablesorter(); 
    } 
  ); 
  $(document).ready(function() 
    { 
      $("#advisorTable").tablesorter( {sortList: [[0,0], [1,0]]} );
      var $rows = $('#advisorTable > tbody > tr');
      $('#search').keyup(function() {
          var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
          
          $rows.show().filter(function() {
              var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
              return !~text.indexOf(val);
          }).hide();
      }); 
    } 
  ); 

  </script>
</html>