<html>
  <head>
    <% include ../shared/_header %>
    <script src="/scripts/jquery-latest.js"></script> 
    <script src="/scripts/jquery.tablesorter.js"></script> 
    <link rel="stylesheet" href="/css/table.css">
  </head>
  <body>
  	<% include ../shared/_navbar %>

  	<div class="container-fluid">

	  	<br><br>
      <% if (user && user['admin']){ %>
        <a href="/jobs/new">Add new job</a>
      <% } %>
      <br>
	  	<br>

      <div class="row">
        <div class="col-sm-4 col-sm-offset-0">
          <div class="input-group stylish-input-group">
            <input type="text" class="form-control" id="search" name="search" placeholder="Type to search" value="">
            </div>
        </div>
      </div>


      <br>
      <br>
      <table id="jobTable" class="table table-striped table-bordered table-hover tablesorter">
        <thead>
        <tr>
          <th></th>
          <th>Job Title</th>
          <th>Created At</th>
          <th>Company</th>
          <th>Location</th>
          <th>Education Requirement</th>
          <th>Salary</th>
          <th>Number of Openings</th>
          <th>Hours Per Week</th>
          <th>Full/Part Time</th>
          <th>Start Date</th>
          <th>Contact</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <% for(var i = 0; i < jobs.length; i++ ){ %>
          <% var job = jobs[i] %>
          <% include _job %>
        <% } %>
        </tbody>
      </table>
  	</div>
 	</body>

  <script>
  $(document).load(function() 
    { 
      $("#jobTable").tablesorter(); 
    } 
  ); 
  $(document).ready(function() 
    { 
      $("#jobTable").tablesorter( {sortList: [[0,0], [1,0]]} );
      var $rows = $('#jobTable > tbody > tr');
      $('#search').keyup(function() {
          var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
          
          $rows.show().filter(function() {
              var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
              return !~text.indexOf(val);
          }).hide();
      }); 
    } 
  ); 

  </script>
</html>